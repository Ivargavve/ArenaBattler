<div class="battle-outer">
  <div class="battle-window">
    <div class="fighter-row">
      <div class="player-info">
        <div class="name">{{ player?.name }}</div>
        <div class="hp">HP: {{ player?.hp }} / {{ player?.maxHp }}</div>
      </div>
      <div class="vs">VS</div>
      <div class="enemy-info">
        <div class="name">{{ enemy?.name }}</div>
        <div class="hp">HP: {{ enemy?.hp }} / {{ enemy?.maxHp }}</div>
      </div>
    </div>

    <div class="battle-log-wrapper">
      <div class="battle-log">
  <ng-container *ngFor="let log of battleLog">
    <div
          *ngIf="log.trim() === '--- End of turn ---'; else normalLog"
          class="battle-divider"
        ></div>
        <ng-template #normalLog>
          <div 
            [ngClass]="{
              'battle-victory': isVictoryLog(log),
              'battle-defeat': isDefeatLog(log),
              'battle-crit': isCritLog(log),
              'battle-enemy-damage': isEnemyDamageLog(log),
              'battle-friendly-damage': isFriendlyDamageLog(log)
            }"
          >
            {{ log }}
          </div>
        </ng-template>
      </ng-container>
    </div>
    </div>

    <div class="battle-controls">
      <div class="battle-actions-left">
        <button 
          *ngIf="battleEnded"
          (click)="startNewBattle()" 
          [disabled]="playerEnergy <= 0"
          class="start-battle-btn">
          Start New Battle
        </button>
      </div>
      <div class="battle-actions-right" *ngIf="!battleEnded">
        <!-- Expand for multiple attacks later! -->
        <button 
          (click)="attack()"
          [disabled]="isLoading || battleEnded"
          class="attack-btn">
          Standard Attack
        </button>
        <button
          disabled
          class="attack-btn alt">
          Special Attack
        </button>
        <button
          disabled
          class="attack-btn alt">
          Defend
        </button>
      </div>
    </div>
  </div>
</div>
